# values-poc.yaml - CORRECTED VERSION
replicaCount: 2

image:
  repository: quoteacr4a409b0a.azurecr.io/quote-app
  tag: "157c672ed0eda9a6f406d56add27b0d5bfd7d450"
  pullPolicy: Always

imagePullSecrets:
  - name: acr-secret

service:
  name: quote-app-internal
  type: ClusterIP
  port: 80
  targetPort: 80

ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /$1
  paths:
    - path: /quote/?(.*)
      pathType: ImplementationSpecific
    - path: /healthz/?(.*)
      pathType: ImplementationSpecific

resources:
  requests:
    memory: "128Mi"
    cpu: "100m"
  limits:
    memory: "256Mi"
    cpu: "500m"

autoscaling:
  enabled: false

database:
  sqlServer: "sql-quote-4a409b0a.privatelink.database.windows.net"
  sqlDatabase: "quotedb"

env:
  APP_NAME: "quote-app"
  FLASK_DEBUG: "false"

probes:
  liveness:
    path: /healthz
    initialDelaySeconds: 30
    periodSeconds: 10
  readiness:
    path: /ready
    initialDelaySeconds: 5
    periodSeconds: 5
