# values-poc.yaml - CORRECTED VERSION
replicaCount: 2

image:
  repository: quoteacr60b19794.azurecr.io/quote-app
  tag: "856fee91c635a88ff34ea80f1708889d4bd281ee"
  pullPolicy: Always

imagePullSecrets:
  - name: acr-secret

service:
  name: quote-app-internal
  type: ClusterIP
  port: 8080
  targetPort: 8080

ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
  paths:
    - path: /quote
      pathType: Prefix
    - path: /healthz
      pathType: Prefix

resources:
  requests:
    memory: "128Mi"
    cpu: "100m"
  limits:
    memory: "256Mi"
    cpu: "500m"

autoscaling:
  enabled: false

database:
  sqlServer: "sql-quote-60b19794.privatelink.database.windows.net"
  sqlDatabase: "quotedb"

env:
  APP_NAME: "quote-app"
  FLASK_DEBUG: "false"

probes:
  liveness:
    path: /healthz
    initialDelaySeconds: 30
    periodSeconds: 10
  readiness:
    path: /ready
    initialDelaySeconds: 5
    periodSeconds: 5
